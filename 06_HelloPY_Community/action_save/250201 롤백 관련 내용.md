ë°°í¬ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤
## CI/CD ë°°í¬ ë° ë¡¤ë°± ì „ëµ
(ê°œë°œì ì‹œì ì—ì„œì˜ ì‹œê°„ ìˆœì„œ ì •ë¦¬)

---

## ë¡¤ë°± ê³¼ì • (ê°œë°œì ì‹œì ì—ì„œì˜ ì£¼ìš” ë‚´ìš©)

### **1. ë°°í¬ í›„ ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš° (í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ë˜ëŠ” ì„œë¹„ìŠ¤ ì¥ì•  ë°œìƒ)**
- ë°°í¬ í›„ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ê°œë°œìëŠ” **ì¦‰ì‹œ ë¡¤ë°±ì„ ê²°ì •**í•´ì•¼ í•¨
- ë¡¤ë°± ì „ëµì€ ì„¸ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë¨: `Git ë¡¤ë°±`, `Docker ì»¨í…Œì´ë„ˆ ë¡¤ë°±`, `CI/CD ë¡¤ë°±`
- ê° ë¡¤ë°±ì€ í•„ìš” íŒë‹¨ì‹œ .bashrcì— í•¨ìˆ˜í˜•ìœ¼ë¡œ ë“±ë¡ ì˜ˆì •
### **2. Git ë¡¤ë°± (`reset --hard`, `revert`)**
**ì‚¬ìš© ì‹œì :**
- `develop` ë¸Œëœì¹˜ì˜ ì½”ë“œ ë³€ê²½ì´ ì˜ëª»ë˜ì—ˆì„ ë•Œ
- íŠ¹ì • ë²„ì „(`v1.1.0`)ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ `v1.0.0`ìœ¼ë¡œ ë˜ëŒë ¤ì•¼ í•  ë•Œ

ğŸ“Œ **Git ë¡¤ë°± ëª…ë ¹ì–´:**
```bash
git checkout develop
git reset --hard v1.0.0  # v1.0.0 ë²„ì „ìœ¼ë¡œ ê°•ì œ ë¡¤ë°±
git push origin develop --force  # ê°•ì œ í‘¸ì‹œ (ì£¼ì˜)
```

âœ… **ê²°ê³¼:** `develop` ë¸Œëœì¹˜ê°€ ì´ì „ ë²„ì „(v1.0.0)ìœ¼ë¡œ ë³µêµ¬ë¨
### **3. Docker ì»¨í…Œì´ë„ˆ ë¡¤ë°±**
**ì‚¬ìš© ì‹œì :**
- `main` ë¸Œëœì¹˜ì—ì„œ ë°°í¬ ì„±ê³µí–ˆì§€ë§Œ, ì„œë¹„ìŠ¤ ì¥ì• ê°€ ë°œìƒí•œ ê²½ìš°
- `v1.1.0`ì„ ë°°í¬í–ˆìœ¼ë‚˜ ë¬¸ì œê°€ ìˆì–´ `v1.0.0`ìœ¼ë¡œ ì¦‰ì‹œ ë³µêµ¬í•´ì•¼ í•  ë•Œ

ğŸ“Œ **Docker ë¡¤ë°± ëª…ë ¹ì–´:**
```bash
ssh user@server "docker stop myapp && docker rm myapp"
ssh user@server "docker run -d -p 8000:8000 --name myapp myrepo/myapp:v1.0.0"
```
âœ… **ê²°ê³¼:** ìµœì‹  ì»¨í…Œì´ë„ˆê°€ ì¤‘ë‹¨ë˜ê³  `v1.0.0` ë²„ì „ì´ ë‹¤ì‹œ ì‹¤í–‰ë¨

### **4. CI/CD ë¡¤ë°± (GitHub Actions í™œìš©)**
#### **ë°°í¬ ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°±**
**ì‚¬ìš© ì‹œì :**
- CI/CD ë°°í¬ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ ìë™ìœ¼ë¡œ ë¡¤ë°±í•˜ë„ë¡ ì„¤ì • ê°€ëŠ¥

ğŸ“Œ **GitHub Actionsì—ì„œ ë°°í¬ ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°±**
```yaml
- name: Deploy to Server
  run: |
    ssh user@server "docker pull myrepo/myapp:latest && docker stop myapp && docker rm myapp && docker run -d -p 8000:8000 --name myapp myrepo/myapp:latest"
  continue-on-error: true

- name: Rollback on Failure
  if: failure()
  run: |
    ssh user@server "docker pull myrepo/myapp:v1.0.0 && docker stop myapp && docker rm myapp && docker run -d -p 8000:8000 --name myapp myrepo/myapp:v1.0.0"
```
âœ… **ê²°ê³¼:**
- ë°°í¬ ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ `v1.0.0` ë²„ì „ìœ¼ë¡œ ë¡¤ë°±ë¨

#### **ë°°í¬ ì„±ê³µ í›„ ì„œë¹„ìŠ¤ ì¥ì• ë¡œ ë¡¤ë°±ì´ í•„ìš”í•œ ê²½ìš°**
**ì‚¬ìš© ì‹œì :**
- ë°°í¬ëŠ” ì„±ê³µí–ˆìœ¼ë‚˜ ì´í›„ ì„œë¹„ìŠ¤ ì¥ì• ë¡œ ì¸í•´ íŠ¹ì • ë²„ì „(`v1.0.0`)ìœ¼ë¡œ ë¡¤ë°±í•´ì•¼ í•˜ëŠ” ê²½ìš°

ğŸ“Œ **GitHub Actionsì—ì„œ íŠ¹ì • ë²„ì „ ë¡¤ë°± ì‹¤í–‰ (ìˆ˜ë™ íŠ¸ë¦¬ê±° ì‚¬ìš©)**
```yaml
on:
  workflow_dispatch:
    inputs:
      version:
        description: "Rollback to specific version"
        required: true
        default: "v1.0.0"
```
âœ… **ê²°ê³¼:**
- GitHub Actions ì‹¤í–‰ ì‹œ, `v1.0.0` ë˜ëŠ” ë‹¤ë¥¸ ë²„ì „ì„ ì„ íƒí•˜ì—¬ ë¡¤ë°± ê°€ëŠ¥
- ì„ íƒí•œ ë²„ì „ì˜ Git ì½”ë“œ ê¸°ë°˜ìœ¼ë¡œ Docker ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•˜ê³  ë°°í¬

---

## 3ï¸âƒ£ Stable ë²„ì „ ê´€ë¦¬
ë°°í¬ê°€ ì•ˆì •ì ìœ¼ë¡œ ì™„ë£Œëœ ì‹œì ì— í•´ë‹¹ ë²„ì „ì„ `stable` íƒœê·¸ë¡œ ì§€ì •í•˜ì—¬, **ë‚˜ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ë¹ ë¥´ê²Œ ë¡¤ë°±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **1. Gitì—ì„œ `stable` íƒœê·¸ ê´€ë¦¬**
```bash
git tag -f stable

git push origin stable --force
```
- `-f` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ íƒœê·¸ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `stable` íƒœê·¸ë¥¼ í•­ìƒ ìµœì‹  ì•ˆì • ì»¤ë°‹ì— ë§ì¶° ê°±ì‹ í•´ë‘ë©´, ë¡¤ë°±í•  ë•Œ ì´ íƒœê·¸ë¡œ ë¹ ë¥´ê²Œ ë³µì› ê°€ëŠ¥í•©ë‹ˆë‹¤.

### **2. Docker ì´ë¯¸ì§€ì— `stable` íƒœê·¸ ì ìš©**
```bash
# Docker ì´ë¯¸ì§€ ë¹Œë“œ í›„ stable íƒœê·¸ë„ ì¶”ê°€

docker build -t myrepo/myapp:latest .
docker tag myrepo/myapp:latest myrepo/myapp:stable

docker push myrepo/myapp:latest

docker push myrepo/myapp:stable
```
- `stable` íƒœê·¸ê°€ ë‹¬ë¦° ì´ë¯¸ì§€ëŠ” **í•­ìƒ ë§ˆì§€ë§‰ìœ¼ë¡œ ê²€ì¦ëœ ì•ˆì • ë²„ì „**ì„ ì˜ë¯¸

### **3. `stable` íƒœê·¸ë¥¼ ì´ìš©í•œ ë¡¤ë°±**
```bash
# ì„œë²„ì—ì„œ stable íƒœê·¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ ì¬ë°°í¬
ssh user@server "docker pull myrepo/myapp:stable && docker stop myapp && docker rm myapp && docker run -d -p 8000:8000 --name myapp myrepo/myapp:stable"
```
- ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ **ì•ˆì • ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë³µì›** ê°€ëŠ¥

---

## 4ï¸âƒ£ ìµœì¢… ì •ë¦¬ (ì‹œê°„ ìˆœì„œ ê¸°ë°˜)
1ï¸âƒ£ **ë°°í¬ ê³¼ì •**
   - ê°œë°œìê°€ ê¸°ëŠ¥ ê°œë°œ (`feature` ë¸Œëœì¹˜ ìƒì„± â†’ `develop` ë³‘í•© â†’ `main` ë³‘í•©)
   - `main` ë¸Œëœì¹˜ì— í‘¸ì‹œë˜ë©´ **CI/CD ìë™ ë°°í¬ ì§„í–‰**
   - ì„œë²„ì— ìµœì‹  Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ë¨

2ï¸âƒ£ **ë¡¤ë°± ê³¼ì •**
   - ë°°í¬ í›„ ì„œë¹„ìŠ¤ ì¥ì•  ë°œìƒ ì‹œ ë¡¤ë°± ê²°ì •
   - **Git ë¡¤ë°±** â†’ ì½”ë“œ ì˜¤ë¥˜ ìˆ˜ì • í•„ìš” ì‹œ `git reset --hard` ì‚¬ìš©
   - **Docker ì»¨í…Œì´ë„ˆ ë¡¤ë°±** â†’ ì´ì „ ë²„ì „ ì»¨í…Œì´ë„ˆ(`v1.0.0`) ì‹¤í–‰
   - **CI/CD ë¡¤ë°±** â†’ GitHub Actionsì—ì„œ íŠ¹ì • ë²„ì „ìœ¼ë¡œ ìë™ ë¡¤ë°± ì‹¤í–‰
   - **Stable íƒœê·¸ ì‚¬ìš©** â†’ `stable` íƒœê·¸ë¥¼ ì´ìš©í•´ ë§ˆì§€ë§‰ ì•ˆì • ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë³µì›

ğŸ’¡ **ê²°ë¡ :**
- ë°°í¬ëŠ” ìë™í™”í•˜ì—¬ ê°œë°œìê°€ ì‹ ê²½ ì“¸ í•„ìš” ì—†ì´ ì§„í–‰ë¨
- ë¡¤ë°±ì€ ê¸´ê¸‰ ì‹œ ë¹ ë¥´ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ **Git/Docker/CI/CD ë¡¤ë°± ë°©ë²•**ì„ ì´í•´í•˜ê³ , **stable** íƒœê·¸ë¥¼ ì§€ì†ì ìœ¼ë¡œ ê°±ì‹ í•´ ë‘ë©´, ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ì¦‰ì‹œ ì•ˆì • ë²„ì „ìœ¼ë¡œ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

